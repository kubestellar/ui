{"level":"info","ts":1750593180.7883358,"caller":"log/log.go:8","msg":"initialized redis client"}
{"level":"warn","ts":1750593180.8702426,"caller":"log/log.go:17","msg":"pls check if redis is runnnig","err":"dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it."}
{"level":"debug","ts":1750593180.8810441,"caller":"log/log.go:25","msg":"Using wds context","context":"wds1"}
{"level":"debug","ts":1750593180.8810441,"caller":"log/log.go:25","msg":"Creating client for BP","kubeconfig path":"C:\\Users\\Naman\\.kube\\config"}
{"level":"info","ts":1750593180.881553,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"kind-kubeflex"}
{"level":"error","ts":1750593180.881553,"caller":"log/log.go:13","msg":"Failed to find context","context":"kind-kubeflex"}
{"level":"info","ts":1750593180.881553,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"k3d-kubeflex"}
{"level":"error","ts":1750593180.881553,"caller":"log/log.go:13","msg":"failed to watch on BP","error":"no valid Kubernetes context found for KubeStellar operations"}
{"level":"error","ts":1750593180.881553,"caller":"log/log.go:13","msg":"Failed to find context","context":"k3d-kubeflex"}
{"level":"error","ts":1750593180.881553,"caller":"log/log.go:13","msg":"failed to initialized backup plugin","error":"failed to find context 'k3d-kubeflex'"}
=== RUN   TestSearchArtifactHub
=== RUN   TestSearchArtifactHub/Valid_search_query
2025/06/22 17:23:00 [INFO] Received search request: {Query:nginx Kind: Offset:0 Limit:10}
2025/06/22 17:23:00 [INFO] Calling Artifact Hub search API: https://artifacthub.io/api/v1/packages/search?kind=0&limit=10&offset=0&ts_query_web=nginx
2025/06/22 17:23:00 [INFO] Search returned 10 packages
=== RUN   TestSearchArtifactHub/Empty_search_query
2025/06/22 17:23:00 [INFO] Received search request: {Query: Kind: Offset:0 Limit:10}
2025/06/22 17:23:00 [INFO] Calling Artifact Hub search API: https://artifacthub.io/api/v1/packages/search?kind=0&limit=10&offset=0&ts_query_web=
2025/06/22 17:23:00 [INFO] Search returned 10 packages
=== RUN   TestSearchArtifactHub/Invalid_request_payload
2025/06/22 17:23:00 [ERROR] Invalid search request payload: EOF
--- PASS: TestSearchArtifactHub (0.09s)
    --- PASS: TestSearchArtifactHub/Valid_search_query (0.08s)
    --- PASS: TestSearchArtifactHub/Empty_search_query (0.01s)
    --- PASS: TestSearchArtifactHub/Invalid_request_payload (0.00s)
=== RUN   TestGetArtifactHubPackageInfo
=== RUN   TestGetArtifactHubPackageInfo/Valid_package_ID
2025/06/22 17:23:00 [INFO] Retrieving package info for: bitnami/nginx/nginx
2025/06/22 17:23:00 [INFO] Parsed packageId - RepoType: bitnami, OrgName: nginx, ChartName: nginx, Version: 
2025/06/22 17:23:00 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:23:01 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:23:01 [ERROR] Failed to fetch package details: artifact Hub API returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageInfo/Empty_package_ID
2025/06/22 17:23:01 [ERROR] Package ID is missing in request
--- PASS: TestGetArtifactHubPackageInfo (0.29s)
    --- PASS: TestGetArtifactHubPackageInfo/Valid_package_ID (0.29s)
    --- PASS: TestGetArtifactHubPackageInfo/Empty_package_ID (0.00s)
=== RUN   TestListArtifactHubRepositories
=== RUN   TestListArtifactHubRepositories/List_repositories
2025/06/22 17:23:01 [INFO] Fetching repositories from Artifact Hub: https://artifacthub.io/api/v1/repositories/search
2025/06/22 17:23:01 [INFO] Retrieved 20 repositories from Artifact Hub
--- PASS: TestListArtifactHubRepositories (0.01s)
    --- PASS: TestListArtifactHubRepositories/List_repositories (0.01s)
=== RUN   TestDeployFromArtifactHub
=== RUN   TestDeployFromArtifactHub/Valid_deployment_request
2025/06/22 17:23:01 [INFO] Received deploy request: {PackageID:bitnami/nginx/nginx Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:23:01 [INFO] Parsed packageID - RepoType: bitnami, OrgName: nginx, ChartName: nginx
2025/06/22 17:23:01 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx/1.0.0
2025/06/22 17:23:01 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:23:01 [ERROR] Failed to get package details from Artifact Hub: artifact Hub API returned status 404: {"message":""}
=== RUN   TestDeployFromArtifactHub/Invalid_packageId_format
2025/06/22 17:23:01 [INFO] Received deploy request: {PackageID:test-package Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:23:01 [ERROR] Invalid packageId format: test-package
=== RUN   TestDeployFromArtifactHub/Missing_package_ID
2025/06/22 17:23:01 [INFO] Received deploy request: {PackageID: Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:23:01 [ERROR] Invalid packageId format: 
=== RUN   TestDeployFromArtifactHub/Invalid_request_body
2025/06/22 17:23:01 [ERROR] Invalid request payload: EOF
--- PASS: TestDeployFromArtifactHub (0.24s)
    --- PASS: TestDeployFromArtifactHub/Valid_deployment_request (0.24s)
    --- PASS: TestDeployFromArtifactHub/Invalid_packageId_format (0.00s)
    --- PASS: TestDeployFromArtifactHub/Missing_package_ID (0.00s)
    --- PASS: TestDeployFromArtifactHub/Invalid_request_body (0.00s)
=== RUN   TestGetArtifactHubPackageValues
=== RUN   TestGetArtifactHubPackageValues/Valid_package_ID
2025/06/22 17:23:01 [INFO] Fetching default values.yaml for packageId: bitnami/nginx/nginx, version: 
2025/06/22 17:23:01 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:23:01 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:23:01 [ERROR] Failed to retrieve package details: artifact Hub API returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageValues/Empty_package_ID
2025/06/22 17:23:01 [ERROR] Package ID not provided
--- PASS: TestGetArtifactHubPackageValues (0.24s)
    --- PASS: TestGetArtifactHubPackageValues/Valid_package_ID (0.24s)
    --- PASS: TestGetArtifactHubPackageValues/Empty_package_ID (0.00s)
=== RUN   TestSearchArtifactHubAdvance
=== RUN   TestSearchArtifactHubAdvance/Advanced_search_with_filters
2025/06/22 17:23:01 [INFO] Processing ArtifactHub search request: query=nginx, kind=0, offset=0, limit=10
2025/06/22 17:23:01 [INFO] Making API request to: https://artifacthub.io/api/v1/packages/search?facets=true&kind=0&limit=10&offset=0&ts_query_web=nginx
2025/06/22 17:23:01 [INFO] Successfully fetched 10 packages from Artifact Hub
2025/06/22 17:23:01 [INFO] Adding repository: bitnami (DisplayName: Bitnami, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: bitnami-aks (DisplayName: Bitnami for Azure Kubernetes Service, Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: krakazyabra (DisplayName: krakazyabra, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: wiremind (DisplayName: Wiremind, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: dysnix (DisplayName: dysnix, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: shubhamtatvamasi (DisplayName: Shubham Tatvamasi, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: kubesphere (DisplayName: , Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: jfrog (DisplayName: , Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: ashu-nginx-chart (DisplayName: ashu-nginx-v1, Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: dhinesh (DisplayName: dhinesh, Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Extracted 10 unique repositories
2025/06/22 17:23:01 [INFO] Found kind: 0 (Helm charts)
2025/06/22 17:23:01 [INFO] Extracted 1 unique kinds
2025/06/22 17:23:01 [INFO] Found license: MIT
2025/06/22 17:23:01 [INFO] Found license: Apache-2.0
2025/06/22 17:23:01 [INFO] Extracted 2 unique licenses
=== RUN   TestSearchArtifactHubAdvance/Empty_advanced_search
2025/06/22 17:23:01 [INFO] Processing ArtifactHub search request: query=, kind=, offset=0, limit=10
2025/06/22 17:23:01 [INFO] Making API request to: https://artifacthub.io/api/v1/packages/search?facets=true&kind=0&limit=10&offset=0&ts_query_web=
2025/06/22 17:23:01 [INFO] Successfully fetched 10 packages from Artifact Hub
2025/06/22 17:23:01 [INFO] Adding repository: prometheus-community (DisplayName: prometheus-community, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: cert-manager (DisplayName: cert-manager, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: ingress-nginx (DisplayName: ingress-nginx, Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: argo (DisplayName: , Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: grafana (DisplayName: Grafana, Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: bitnami (DisplayName: Bitnami, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: k8s-dashboard (DisplayName: , Verified: false, Official: false)
2025/06/22 17:23:01 [INFO] Adding repository: traefik (DisplayName: TraefikLabs Charts, Verified: true, Official: false)
2025/06/22 17:23:01 [INFO] Extracted 8 unique repositories
2025/06/22 17:23:01 [INFO] Found kind: 0 (Helm charts)
2025/06/22 17:23:01 [INFO] Extracted 1 unique kinds
2025/06/22 17:23:01 [INFO] Found license: Apache-2.0
2025/06/22 17:23:01 [INFO] Extracted 1 unique licenses
=== RUN   TestSearchArtifactHubAdvance/Invalid_request_payload
2025/06/22 17:23:01 [ERROR] Invalid search request payload: EOF
--- PASS: TestSearchArtifactHubAdvance (0.02s)
    --- PASS: TestSearchArtifactHubAdvance/Advanced_search_with_filters (0.01s)
    --- PASS: TestSearchArtifactHubAdvance/Empty_advanced_search (0.01s)
    --- PASS: TestSearchArtifactHubAdvance/Invalid_request_payload (0.00s)
=== RUN   TestGetArtifactHubPackageAdvanceDetails
=== RUN   TestGetArtifactHubPackageAdvanceDetails/Valid_package_ID_for_advance_details
2025/06/22 17:23:01 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:23:02 [ERROR] ArtifactHub returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageAdvanceDetails/Empty_package_ID_for_advance_details
--- PASS: TestGetArtifactHubPackageAdvanceDetails (0.24s)
    --- PASS: TestGetArtifactHubPackageAdvanceDetails/Valid_package_ID_for_advance_details (0.24s)
    --- PASS: TestGetArtifactHubPackageAdvanceDetails/Empty_package_ID_for_advance_details (0.00s)
PASS
ok  	command-line-arguments	1.547s
