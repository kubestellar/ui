{"level":"info","ts":1750593124.4559932,"caller":"log/log.go:8","msg":"initialized redis client"}
{"level":"warn","ts":1750593124.537018,"caller":"log/log.go:17","msg":"pls check if redis is runnnig","err":"dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it."}
{"level":"debug","ts":1750593124.5502226,"caller":"log/log.go:25","msg":"Using wds context","context":"wds1"}
{"level":"debug","ts":1750593124.550727,"caller":"log/log.go:25","msg":"Creating client for BP","kubeconfig path":"C:\\Users\\Naman\\.kube\\config"}
{"level":"info","ts":1750593124.550727,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"kind-kubeflex"}
{"level":"error","ts":1750593124.5513856,"caller":"log/log.go:13","msg":"Failed to find context","context":"kind-kubeflex"}
{"level":"info","ts":1750593124.5513856,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"k3d-kubeflex"}
{"level":"error","ts":1750593124.5513856,"caller":"log/log.go:13","msg":"failed to watch on BP","error":"no valid Kubernetes context found for KubeStellar operations"}
{"level":"error","ts":1750593124.5513856,"caller":"log/log.go:13","msg":"Failed to find context","context":"k3d-kubeflex"}
{"level":"error","ts":1750593124.5513856,"caller":"log/log.go:13","msg":"failed to initialized backup plugin","error":"failed to find context 'k3d-kubeflex'"}
=== RUN   TestSearchArtifactHub
=== RUN   TestSearchArtifactHub/Valid_search_query
2025/06/22 17:22:04 [INFO] Received search request: {Query:nginx Kind: Offset:0 Limit:10}
2025/06/22 17:22:04 [INFO] Calling Artifact Hub search API: https://artifacthub.io/api/v1/packages/search?kind=0&limit=10&offset=0&ts_query_web=nginx
2025/06/22 17:22:04 [INFO] Search returned 10 packages
=== RUN   TestSearchArtifactHub/Empty_search_query
2025/06/22 17:22:04 [INFO] Received search request: {Query: Kind: Offset:0 Limit:10}
2025/06/22 17:22:04 [INFO] Calling Artifact Hub search API: https://artifacthub.io/api/v1/packages/search?kind=0&limit=10&offset=0&ts_query_web=
2025/06/22 17:22:04 [INFO] Search returned 10 packages
=== RUN   TestSearchArtifactHub/Invalid_request_payload
2025/06/22 17:22:04 [ERROR] Invalid search request payload: EOF
--- PASS: TestSearchArtifactHub (0.09s)
    --- PASS: TestSearchArtifactHub/Valid_search_query (0.07s)
    --- PASS: TestSearchArtifactHub/Empty_search_query (0.01s)
    --- PASS: TestSearchArtifactHub/Invalid_request_payload (0.00s)
=== RUN   TestGetArtifactHubPackageInfo
=== RUN   TestGetArtifactHubPackageInfo/Valid_package_ID
2025/06/22 17:22:04 [INFO] Retrieving package info for: bitnami/nginx/nginx
2025/06/22 17:22:04 [INFO] Parsed packageId - RepoType: bitnami, OrgName: nginx, ChartName: nginx, Version: 
2025/06/22 17:22:04 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:22:04 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:22:04 [ERROR] Failed to fetch package details: artifact Hub API returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageInfo/Empty_package_ID
2025/06/22 17:22:04 [ERROR] Package ID is missing in request
--- PASS: TestGetArtifactHubPackageInfo (0.26s)
    --- PASS: TestGetArtifactHubPackageInfo/Valid_package_ID (0.26s)
    --- PASS: TestGetArtifactHubPackageInfo/Empty_package_ID (0.00s)
=== RUN   TestListArtifactHubRepositories
=== RUN   TestListArtifactHubRepositories/List_repositories
2025/06/22 17:22:04 [INFO] Fetching repositories from Artifact Hub: https://artifacthub.io/api/v1/repositories/search
2025/06/22 17:22:04 [INFO] Retrieved 20 repositories from Artifact Hub
--- PASS: TestListArtifactHubRepositories (0.01s)
    --- PASS: TestListArtifactHubRepositories/List_repositories (0.01s)
=== RUN   TestDeployFromArtifactHub
=== RUN   TestDeployFromArtifactHub/Valid_deployment_request
2025/06/22 17:22:04 [INFO] Received deploy request: {PackageID:bitnami/nginx/nginx Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:22:04 [INFO] Parsed packageID - RepoType: bitnami, OrgName: nginx, ChartName: nginx
2025/06/22 17:22:04 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx/1.0.0
2025/06/22 17:22:05 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:22:05 [ERROR] Failed to get package details from Artifact Hub: artifact Hub API returned status 404: {"message":""}
=== RUN   TestDeployFromArtifactHub/Invalid_packageId_format
2025/06/22 17:22:05 [INFO] Received deploy request: {PackageID:test-package Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:22:05 [ERROR] Invalid packageId format: test-package
=== RUN   TestDeployFromArtifactHub/Missing_package_ID
2025/06/22 17:22:05 [INFO] Received deploy request: {PackageID: Version:1.0.0 Namespace:default ReleaseName:my-release Values:map[] ConfigMaps:[] WorkloadLabel:test-app}
2025/06/22 17:22:05 [ERROR] Invalid packageId format: 
=== RUN   TestDeployFromArtifactHub/Invalid_request_body
2025/06/22 17:22:05 [ERROR] Invalid request payload: EOF
--- PASS: TestDeployFromArtifactHub (0.24s)
    --- PASS: TestDeployFromArtifactHub/Valid_deployment_request (0.24s)
    --- PASS: TestDeployFromArtifactHub/Invalid_packageId_format (0.00s)
    --- PASS: TestDeployFromArtifactHub/Missing_package_ID (0.00s)
    --- PASS: TestDeployFromArtifactHub/Invalid_request_body (0.00s)
=== RUN   TestGetArtifactHubPackageValues
=== RUN   TestGetArtifactHubPackageValues/Valid_package_ID
2025/06/22 17:22:05 [INFO] Fetching default values.yaml for packageId: bitnami/nginx/nginx, version: 
2025/06/22 17:22:05 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:22:05 [ERROR] Artifact Hub returned status 404: {"message":""}
2025/06/22 17:22:05 [ERROR] Failed to retrieve package details: artifact Hub API returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageValues/Empty_package_ID
2025/06/22 17:22:05 [ERROR] Package ID not provided
--- PASS: TestGetArtifactHubPackageValues (0.24s)
    --- PASS: TestGetArtifactHubPackageValues/Valid_package_ID (0.24s)
    --- PASS: TestGetArtifactHubPackageValues/Empty_package_ID (0.00s)
=== RUN   TestSearchArtifactHubAdvance
=== RUN   TestSearchArtifactHubAdvance/Advanced_search_with_filters
2025/06/22 17:22:05 [INFO] Processing ArtifactHub search request: query=nginx, kind=0, offset=0, limit=10
2025/06/22 17:22:05 [INFO] Making API request to: https://artifacthub.io/api/v1/packages/search?facets=true&kind=0&limit=10&offset=0&ts_query_web=nginx
2025/06/22 17:22:05 [INFO] Successfully fetched 10 packages from Artifact Hub
2025/06/22 17:22:05 [INFO] Adding repository: bitnami (DisplayName: Bitnami, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: bitnami-aks (DisplayName: Bitnami for Azure Kubernetes Service, Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: krakazyabra (DisplayName: krakazyabra, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: wiremind (DisplayName: Wiremind, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: dysnix (DisplayName: dysnix, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: shubhamtatvamasi (DisplayName: Shubham Tatvamasi, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: kubesphere (DisplayName: , Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: jfrog (DisplayName: , Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: ashu-nginx-chart (DisplayName: ashu-nginx-v1, Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: dhinesh (DisplayName: dhinesh, Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Extracted 10 unique repositories
2025/06/22 17:22:05 [INFO] Found kind: 0 (Helm charts)
2025/06/22 17:22:05 [INFO] Extracted 1 unique kinds
2025/06/22 17:22:05 [INFO] Found license: MIT
2025/06/22 17:22:05 [INFO] Found license: Apache-2.0
2025/06/22 17:22:05 [INFO] Extracted 2 unique licenses
=== RUN   TestSearchArtifactHubAdvance/Empty_advanced_search
2025/06/22 17:22:05 [INFO] Processing ArtifactHub search request: query=, kind=, offset=0, limit=10
2025/06/22 17:22:05 [INFO] Making API request to: https://artifacthub.io/api/v1/packages/search?facets=true&kind=0&limit=10&offset=0&ts_query_web=
2025/06/22 17:22:05 [INFO] Successfully fetched 10 packages from Artifact Hub
2025/06/22 17:22:05 [INFO] Adding repository: prometheus-community (DisplayName: prometheus-community, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: cert-manager (DisplayName: cert-manager, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: ingress-nginx (DisplayName: ingress-nginx, Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: argo (DisplayName: , Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: grafana (DisplayName: Grafana, Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: bitnami (DisplayName: Bitnami, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: k8s-dashboard (DisplayName: , Verified: false, Official: false)
2025/06/22 17:22:05 [INFO] Adding repository: traefik (DisplayName: TraefikLabs Charts, Verified: true, Official: false)
2025/06/22 17:22:05 [INFO] Extracted 8 unique repositories
2025/06/22 17:22:05 [INFO] Found kind: 0 (Helm charts)
2025/06/22 17:22:05 [INFO] Extracted 1 unique kinds
2025/06/22 17:22:05 [INFO] Found license: Apache-2.0
2025/06/22 17:22:05 [INFO] Extracted 1 unique licenses
=== RUN   TestSearchArtifactHubAdvance/Invalid_request_payload
2025/06/22 17:22:05 [ERROR] Invalid search request payload: EOF
--- PASS: TestSearchArtifactHubAdvance (0.03s)
    --- PASS: TestSearchArtifactHubAdvance/Advanced_search_with_filters (0.01s)
    --- PASS: TestSearchArtifactHubAdvance/Empty_advanced_search (0.01s)
    --- PASS: TestSearchArtifactHubAdvance/Invalid_request_payload (0.00s)
=== RUN   TestGetArtifactHubPackageAdvanceDetails
=== RUN   TestGetArtifactHubPackageAdvanceDetails/Valid_package_ID_for_advance_details
2025/06/22 17:22:05 [INFO] Fetching package details from: https://artifacthub.io/api/v1/packages/bitnami/nginx/nginx
2025/06/22 17:22:05 [ERROR] ArtifactHub returned status 404: {"message":""}
=== RUN   TestGetArtifactHubPackageAdvanceDetails/Empty_package_ID_for_advance_details
--- PASS: TestGetArtifactHubPackageAdvanceDetails (0.23s)
    --- PASS: TestGetArtifactHubPackageAdvanceDetails/Valid_package_ID_for_advance_details (0.23s)
    --- PASS: TestGetArtifactHubPackageAdvanceDetails/Empty_package_ID_for_advance_details (0.00s)
=== RUN   TestOnboardingLogsHandler
=== RUN   TestOnboardingLogsHandler/Valid_cluster_name
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Fetching cluster name","cluster":"test-cluster"}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Getting onboarding events","count":0,"cluster":"test-cluster"}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Checking cluster status","cluster":"test-cluster","status":"","exists":false}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Checking for onboarding if its in progress","cluster":"test-cluster","inProgress: ":false}
{"level":"error","ts":1750593125.6459296,"caller":"log/log.go:13","msg":"No onboarding data found for cluster","cluster":"test-cluster"}
=== RUN   TestOnboardingLogsHandler/Empty_cluster_name
{"level":"error","ts":1750593125.6459296,"caller":"log/log.go:13","msg":"Cluster name is required"}
=== RUN   TestOnboardingLogsHandler/Non-existent_cluster
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Fetching cluster name","cluster":"non-existent-cluster"}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Getting onboarding events","count":0,"cluster":"non-existent-cluster"}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Checking cluster status","cluster":"non-existent-cluster","status":"","exists":false}
{"level":"info","ts":1750593125.6459296,"caller":"log/log.go:8","msg":"Checking for onboarding if its in progress","cluster":"non-existent-cluster","inProgress: ":false}
{"level":"error","ts":1750593125.6459296,"caller":"log/log.go:13","msg":"No onboarding data found for cluster","cluster":"non-existent-cluster"}
--- PASS: TestOnboardingLogsHandler (0.00s)
    --- PASS: TestOnboardingLogsHandler/Valid_cluster_name (0.00s)
    --- PASS: TestOnboardingLogsHandler/Empty_cluster_name (0.00s)
    --- PASS: TestOnboardingLogsHandler/Non-existent_cluster (0.00s)
=== RUN   TestWSOnboardingHandler
=== RUN   TestWSOnboardingHandler/Valid_cluster_parameter
{"level":"info","ts":1750593125.6479492,"caller":"log/log.go:8","msg":"Incoming WebSocket onboarding connection request","cluster":"test-cluster","remote_addr":""}
{"level":"error","ts":1750593125.6479492,"caller":"log/log.go:13","msg":"Failed to upgrade connection","error":"websocket: the client is not using the websocket protocol: 'upgrade' token not found in 'Connection' header"}
=== RUN   TestWSOnboardingHandler/Missing_cluster_parameter
--- PASS: TestWSOnboardingHandler (0.00s)
    --- PASS: TestWSOnboardingHandler/Valid_cluster_parameter (0.00s)
    --- PASS: TestWSOnboardingHandler/Missing_cluster_parameter (0.00s)
=== RUN   TestWSHealthHandler
=== RUN   TestWSHealthHandler/WebSocket_health_check
{"level":"info","ts":1750593125.6486387,"caller":"log/log.go:8","msg":"Health checking for WebSocket connections"}
--- PASS: TestWSHealthHandler (0.00s)
    --- PASS: TestWSHealthHandler/WebSocket_health_check (0.00s)
=== RUN   TestClusterSocketUtilityFunctions
=== RUN   TestClusterSocketUtilityFunctions/Test_LogOnboardingEvent
{"level":"info","ts":1750593125.6489756,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster","status":"Testing","message":"Test message"}
{"level":"info","ts":1750593125.6489756,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster","event":{"clusterName":"test-cluster","status":"Testing","message":"Test message","timestamp":"2025-06-22T17:22:05.6489756+05:30"}}
=== RUN   TestClusterSocketUtilityFunctions/Test_GetOnboardingEvents
=== RUN   TestClusterSocketUtilityFunctions/Test_ClearOnboardingEvents
{"level":"info","ts":1750593125.6505933,"caller":"log/log.go:8","msg":"Clearing all events for cluster","cluster":"test-cluster"}
=== RUN   TestClusterSocketUtilityFunctions/Test_RegisterOnboardingStart
{"level":"info","ts":1750593125.6505933,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster","status":"Started","message":"Onboarding process initiated"}
{"level":"info","ts":1750593125.6506948,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster","event":{"clusterName":"test-cluster","status":"Started","message":"Onboarding process initiated","timestamp":"2025-06-22T17:22:05.6505933+05:30"}}
=== RUN   TestClusterSocketUtilityFunctions/Test_RegisterOnboardingComplete
{"level":"info","ts":1750593125.6506948,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster","status":"Completed","message":"Onboarding completed successfully"}
{"level":"info","ts":1750593125.6506948,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster","event":{"clusterName":"test-cluster","status":"Completed","message":"Onboarding completed successfully","timestamp":"2025-06-22T17:22:05.650695+05:30"}}
{"level":"info","ts":1750593125.6506948,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster","status":"Failed","message":"Onboarding failed: assert.AnError general error for testing"}
{"level":"info","ts":1750593125.6506948,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster","event":{"clusterName":"test-cluster","status":"Failed","message":"Onboarding failed: assert.AnError general error for testing","timestamp":"2025-06-22T17:22:05.650695+05:30"}}
--- PASS: TestClusterSocketUtilityFunctions (0.00s)
    --- PASS: TestClusterSocketUtilityFunctions/Test_LogOnboardingEvent (0.00s)
    --- PASS: TestClusterSocketUtilityFunctions/Test_GetOnboardingEvents (0.00s)
    --- PASS: TestClusterSocketUtilityFunctions/Test_ClearOnboardingEvents (0.00s)
    --- PASS: TestClusterSocketUtilityFunctions/Test_RegisterOnboardingStart (0.00s)
    --- PASS: TestClusterSocketUtilityFunctions/Test_RegisterOnboardingComplete (0.00s)
=== RUN   TestDeployHandler
=== RUN   TestDeployHandler/Valid_deployment_request
2025/06/22 17:22:06 Warning: Failed to save deployment config to Redis: multiple Redis errors: [failed to set filepath: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set repoURL: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set branch: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set gitToken: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it.]
=== RUN   TestDeployHandler/Missing_repo_url
=== RUN   TestDeployHandler/Invalid_GitHub_URL
=== RUN   TestDeployHandler/Valid_request_with_dry_run
2025/06/22 17:22:07 Warning: Failed to save deployment config to Redis: multiple Redis errors: [failed to set filepath: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set repoURL: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set branch: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. failed to set gitToken: dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it. dial tcp [::1]:6379: connectex: No connection could be made because the target machine actively refused it.]
=== RUN   TestDeployHandler/Invalid_request_body
--- PASS: TestDeployHandler (3.00s)
    --- PASS: TestDeployHandler/Valid_deployment_request (1.49s)
    --- PASS: TestDeployHandler/Missing_repo_url (0.00s)
    --- PASS: TestDeployHandler/Invalid_GitHub_URL (0.00s)
    --- PASS: TestDeployHandler/Valid_request_with_dry_run (1.51s)
    --- PASS: TestDeployHandler/Invalid_request_body (0.00s)
=== RUN   TestGitHubWebhookHandler
=== RUN   TestGitHubWebhookHandler/Valid_webhook_payload
=== RUN   TestGitHubWebhookHandler/Invalid_webhook_payload
=== RUN   TestGitHubWebhookHandler/Empty_webhook_payload
--- PASS: TestGitHubWebhookHandler (0.12s)
    --- PASS: TestGitHubWebhookHandler/Valid_webhook_payload (0.12s)
    --- PASS: TestGitHubWebhookHandler/Invalid_webhook_payload (0.00s)
    --- PASS: TestGitHubWebhookHandler/Empty_webhook_payload (0.00s)
=== RUN   TestHealthCheckHandler
=== RUN   TestHealthCheckHandler/Health_check
{"level":"info","ts":1750593128.8656945,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"its1"}
{"level":"error","ts":1750593128.8667681,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
--- PASS: TestHealthCheckHandler (0.10s)
    --- PASS: TestHealthCheckHandler/Health_check (0.10s)
=== RUN   TestDeploymentStatusHandler
=== RUN   TestDeploymentStatusHandler/Valid_deployment_ID
{"level":"info","ts":1750593128.8669229,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"its1"}
{"level":"error","ts":1750593128.8681006,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
=== RUN   TestDeploymentStatusHandler/Empty_deployment_ID
--- PASS: TestDeploymentStatusHandler (0.00s)
    --- PASS: TestDeploymentStatusHandler/Valid_deployment_ID (0.00s)
    --- PASS: TestDeploymentStatusHandler/Empty_deployment_ID (0.00s)
=== RUN   TestListDeploymentsHandler
=== RUN   TestListDeploymentsHandler/List_deployments
{"level":"info","ts":1750593128.868859,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"its1"}
{"level":"error","ts":1750593128.868859,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
--- PASS: TestListDeploymentsHandler (0.00s)
    --- PASS: TestListDeploymentsHandler/List_deployments (0.00s)
=== RUN   TestDeleteDeploymentHandler
=== RUN   TestDeleteDeploymentHandler/Valid_deployment_ID
{"level":"info","ts":1750593128.869362,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with context","context":"its1"}
{"level":"error","ts":1750593128.869362,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
=== RUN   TestDeleteDeploymentHandler/Empty_deployment_ID
--- PASS: TestDeleteDeploymentHandler (0.00s)
    --- PASS: TestDeleteDeploymentHandler/Valid_deployment_ID (0.00s)
    --- PASS: TestDeleteDeploymentHandler/Empty_deployment_ID (0.00s)
=== RUN   TestValidateConfigHandler
=== RUN   TestValidateConfigHandler/Validate_config
--- PASS: TestValidateConfigHandler (0.00s)
    --- PASS: TestValidateConfigHandler/Validate_config (0.00s)
=== RUN   TestDetachClusterHandler
=== RUN   TestDetachClusterHandler/Valid_cluster_detachment_request
{"level":"info","ts":1750593128.8700404,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with config context","context":"its1"}
{"level":"error","ts":1750593128.8705456,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
=== RUN   TestDetachClusterHandler/Missing_cluster_name
=== RUN   TestDetachClusterHandler/Empty_cluster_name
=== RUN   TestDetachClusterHandler/Invalid_request_body
--- PASS: TestDetachClusterHandler (0.00s)
    --- PASS: TestDetachClusterHandler/Valid_cluster_detachment_request (0.00s)
    --- PASS: TestDetachClusterHandler/Missing_cluster_name (0.00s)
    --- PASS: TestDetachClusterHandler/Empty_cluster_name (0.00s)
    --- PASS: TestDetachClusterHandler/Invalid_request_body (0.00s)
=== RUN   TestGetDetachmentLogsHandler
=== RUN   TestGetDetachmentLogsHandler/Valid_cluster_name
=== RUN   TestGetDetachmentLogsHandler/Empty_cluster_name
=== RUN   TestGetDetachmentLogsHandler/Non-existent_cluster
--- PASS: TestGetDetachmentLogsHandler (0.00s)
    --- PASS: TestGetDetachmentLogsHandler/Valid_cluster_name (0.00s)
    --- PASS: TestGetDetachmentLogsHandler/Empty_cluster_name (0.00s)
    --- PASS: TestGetDetachmentLogsHandler/Non-existent_cluster (0.00s)
=== RUN   TestDetachClusterHandler_EdgeCases
=== RUN   TestDetachClusterHandler_EdgeCases/Invalid_content_type
=== RUN   TestDetachClusterHandler_EdgeCases/Malformed_JSON
--- PASS: TestDetachClusterHandler_EdgeCases (0.00s)
    --- PASS: TestDetachClusterHandler_EdgeCases/Invalid_content_type (0.00s)
    --- PASS: TestDetachClusterHandler_EdgeCases/Malformed_JSON (0.00s)
=== RUN   TestGetClusterStatusHandler
=== RUN   TestGetClusterStatusHandler/Get_cluster_status
--- PASS: TestGetClusterStatusHandler (0.00s)
    --- PASS: TestGetClusterStatusHandler/Get_cluster_status (0.00s)
=== RUN   TestOnboardClusterHandler_JSON
=== RUN   TestOnboardClusterHandler_JSON/Valid_JSON_request_with_cluster_name_only
=== RUN   TestOnboardClusterHandler_JSON/Missing_cluster_name
=== RUN   TestOnboardClusterHandler_JSON/Empty_request_body
=== RUN   TestOnboardClusterHandler_JSON/Valid_JSON_request_with_kubeconfig
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Clearing all events for cluster","cluster":"test-cluster-2"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-2","status":"Initiated","message":"Onboarding process initiated by API request"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-2","event":{"clusterName":"test-cluster-2","status":"Initiated","message":"Onboarding process initiated by API request","timestamp":"2025-06-22T17:22:08.8717038+05:30"}}
--- PASS: TestOnboardClusterHandler_JSON (0.00s)
    --- PASS: TestOnboardClusterHandler_JSON/Valid_JSON_request_with_cluster_name_only (0.00s)
    --- PASS: TestOnboardClusterHandler_JSON/Missing_cluster_name (0.00s)
    --- PASS: TestOnboardClusterHandler_JSON/Empty_request_body (0.00s)
    --- PASS: TestOnboardClusterHandler_JSON/Valid_JSON_request_with_kubeconfig (0.00s)
=== RUN   TestOnboardClusterHandler_FormData
=== RUN   TestOnboardClusterHandler_FormData/Valid_form_data_with_cluster_name_only
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-2","status":"Started","message":"Onboarding process initiated"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-2","event":{"clusterName":"test-cluster-2","status":"Started","message":"Onboarding process initiated","timestamp":"2025-06-22T17:22:08.8717038+05:30"}}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-2","status":"Validating","message":"Validating cluster connectivity"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-2","event":{"clusterName":"test-cluster-2","status":"Validating","message":"Validating cluster connectivity","timestamp":"2025-06-22T17:22:08.8717038+05:30"}}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-2","status":"Error","message":"Connectivity validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-2","event":{"clusterName":"test-cluster-2","status":"Error","message":"Connectivity validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable","timestamp":"2025-06-22T17:22:08.8717038+05:30"}}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-2","status":"Failed","message":"Onboarding failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"}
{"level":"info","ts":1750593128.8717039,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-2","event":{"clusterName":"test-cluster-2","status":"Failed","message":"Onboarding failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable","timestamp":"2025-06-22T17:22:08.8717038+05:30"}}
=== RUN   TestOnboardClusterHandler_FormData/Missing_cluster_name_and_file
2025/06/22 17:22:08 Cluster 'test-cluster-2' onboarding failed: cluster validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
=== RUN   TestOnboardClusterHandler_FormData/Valid_form_with_kubeconfig_file
{"level":"info","ts":1750593128.8749924,"caller":"log/log.go:8","msg":"Clearing all events for cluster","cluster":"test-cluster-form"}
{"level":"info","ts":1750593128.8749924,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-form","status":"Initiated","message":"Onboarding process initiated by API request"}
{"level":"info","ts":1750593128.8749924,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-form","event":{"clusterName":"test-cluster-form","status":"Initiated","message":"Onboarding process initiated by API request","timestamp":"2025-06-22T17:22:08.8749925+05:30"}}
--- PASS: TestOnboardClusterHandler_FormData (0.00s)
    --- PASS: TestOnboardClusterHandler_FormData/Valid_form_data_with_cluster_name_only (0.00s)
    --- PASS: TestOnboardClusterHandler_FormData/Missing_cluster_name_and_file (0.00s)
    --- PASS: TestOnboardClusterHandler_FormData/Valid_form_with_kubeconfig_file (0.00s)
=== RUN   TestUpdateManagedClusterLabelsHandler
=== RUN   TestUpdateManagedClusterLabelsHandler/Valid_request
{"level":"info","ts":1750593128.8755224,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with config context","context":"test-context"}
{"level":"error","ts":1750593128.87602,"caller":"log/log.go:13","msg":"Failed to find context","context":"test-context"}
=== RUN   TestUpdateManagedClusterLabelsHandler/Missing_context_name
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-form","status":"Started","message":"Onboarding process initiated"}
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-form","event":{"clusterName":"test-cluster-form","status":"Started","message":"Onboarding process initiated","timestamp":"2025-06-22T17:22:08.8760199+05:30"}}
=== RUN   TestUpdateManagedClusterLabelsHandler/Missing_cluster_name
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-form","status":"Validating","message":"Validating cluster connectivity"}
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-form","event":{"clusterName":"test-cluster-form","status":"Validating","message":"Validating cluster connectivity","timestamp":"2025-06-22T17:22:08.8760199+05:30"}}
=== RUN   TestUpdateManagedClusterLabelsHandler/Invalid_request_body
--- PASS: TestUpdateManagedClusterLabelsHandler (0.00s)
    --- PASS: TestUpdateManagedClusterLabelsHandler/Valid_request (0.00s)
    --- PASS: TestUpdateManagedClusterLabelsHandler/Missing_context_name (0.00s)
    --- PASS: TestUpdateManagedClusterLabelsHandler/Missing_cluster_name (0.00s)
    --- PASS: TestUpdateManagedClusterLabelsHandler/Invalid_request_body (0.00s)
=== RUN   TestCheckPrerequisitesHandler
=== RUN   TestCheckPrerequisitesHandler/Check_prerequisites
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-form","status":"Error","message":"Connectivity validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"}
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-form","event":{"clusterName":"test-cluster-form","status":"Error","message":"Connectivity validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable","timestamp":"2025-06-22T17:22:08.8760199+05:30"}}
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Onboarding event logged","cluster":"test-cluster-form","status":"Failed","message":"Onboarding failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"}
{"level":"info","ts":1750593128.87602,"caller":"log/log.go:8","msg":"Broadcasting event","cluster":"test-cluster-form","event":{"clusterName":"test-cluster-form","status":"Failed","message":"Onboarding failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable","timestamp":"2025-06-22T17:22:08.8760199+05:30"}}
2025/06/22 17:22:08 Cluster 'test-cluster-form' onboarding failed: cluster validation failed: failed to parse kubeconfig: invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable
{"level":"info","ts":1750593129.550491,"caller":"log/log.go:8","msg":"Refreshing binding policy cache from Kubernetes"}
{"level":"debug","ts":1750593129.550491,"caller":"log/log.go:25","msg":"Using wds context","context":"wds1"}
{"level":"debug","ts":1750593129.550491,"caller":"log/log.go:25","msg":"Creating client for BP","kubeconfig path":"C:\\Users\\Naman\\.kube\\config"}
{"level":"error","ts":1750593129.550491,"caller":"log/log.go:13","msg":"failed to create client for cache refresh","error":"no valid Kubernetes context found for KubeStellar operations"}
{"level":"warn","ts":1750593129.550491,"caller":"log/log.go:17","msg":"failed to refresh binding policy cache on startup","error":"no valid Kubernetes context found for KubeStellar operations"}
--- PASS: TestCheckPrerequisitesHandler (0.77s)
    --- PASS: TestCheckPrerequisitesHandler/Check_prerequisites (0.77s)
=== RUN   TestInstallHandler
=== RUN   TestInstallHandler/Valid_kind_platform
=== RUN   TestInstallHandler/Valid_k3d_platform
=== RUN   TestInstallHandler/Invalid_platform
=== RUN   TestInstallHandler/Empty_request_body
=== RUN   TestInstallHandler/Missing_platform
=== RUN   TestInstallHandler/Malformed_JSON
--- PASS: TestInstallHandler (0.00s)
    --- PASS: TestInstallHandler/Valid_kind_platform (0.00s)
    --- PASS: TestInstallHandler/Valid_k3d_platform (0.00s)
    --- PASS: TestInstallHandler/Invalid_platform (0.00s)
    --- PASS: TestInstallHandler/Empty_request_body (0.00s)
    --- PASS: TestInstallHandler/Missing_platform (0.00s)
    --- PASS: TestInstallHandler/Malformed_JSON (0.00s)
=== RUN   TestGetLogsHandler
=== RUN   TestGetLogsHandler/Valid_install_ID
=== RUN   TestGetLogsHandler/Empty_install_ID
--- PASS: TestGetLogsHandler (0.00s)
    --- PASS: TestGetLogsHandler/Valid_install_ID (0.00s)
    --- PASS: TestGetLogsHandler/Empty_install_ID (0.00s)
=== RUN   TestLogsWebSocketHandler
=== RUN   TestLogsWebSocketHandler/Valid_install_ID_parameter
=== RUN   TestLogsWebSocketHandler/Empty_install_ID_parameter
--- PASS: TestLogsWebSocketHandler (0.00s)
    --- PASS: TestLogsWebSocketHandler/Valid_install_ID_parameter (0.00s)
    --- PASS: TestLogsWebSocketHandler/Empty_install_ID_parameter (0.00s)
=== RUN   TestInstallerWebSocketUtilityFunctions
=== RUN   TestInstallerWebSocketUtilityFunctions/Placeholder_for_utility_functions
--- PASS: TestInstallerWebSocketUtilityFunctions (0.00s)
    --- PASS: TestInstallerWebSocketUtilityFunctions/Placeholder_for_utility_functions (0.00s)
=== RUN   TestGetManagedClustersHandler
=== RUN   TestGetManagedClustersHandler/Default_context
{"level":"info","ts":1750593129.644395,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with config context","context":"its1"}
{"level":"error","ts":1750593129.6450884,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
=== RUN   TestGetManagedClustersHandler/Custom_context
{"level":"info","ts":1750593129.6450884,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with config context","context":"test-context"}
{"level":"error","ts":1750593129.6450884,"caller":"log/log.go:13","msg":"Failed to find context","context":"test-context"}
--- PASS: TestGetManagedClustersHandler (0.00s)
    --- PASS: TestGetManagedClustersHandler/Default_context (0.00s)
    --- PASS: TestGetManagedClustersHandler/Custom_context (0.00s)
=== RUN   TestGetManagedClusterHandler
=== RUN   TestGetManagedClusterHandler/Empty_cluster_name
=== RUN   TestGetManagedClusterHandler/Special_cluster_name_with_'selected_clusters'
=== RUN   TestGetManagedClusterHandler/Regular_cluster_name
{"level":"info","ts":1750593129.6456087,"caller":"log/log.go:8","msg":"Getting Kubernetes client set with config context","context":"its1"}
{"level":"error","ts":1750593129.6456087,"caller":"log/log.go:13","msg":"Failed to find context","context":"its1"}
--- PASS: TestGetManagedClusterHandler (0.00s)
    --- PASS: TestGetManagedClusterHandler/Empty_cluster_name (0.00s)
    --- PASS: TestGetManagedClusterHandler/Special_cluster_name_with_'selected_clusters' (0.00s)
    --- PASS: TestGetManagedClusterHandler/Regular_cluster_name (0.00s)
=== RUN   TestListPluginsHandler
=== RUN   TestListPluginsHandler/List_plugins
{"level":"info","ts":1750593129.6456087,"caller":"log/log.go:8","msg":"Handling ListPluginsHandler request"}
--- PASS: TestListPluginsHandler (0.00s)
    --- PASS: TestListPluginsHandler/List_plugins (0.00s)
=== RUN   TestGetPluginDetailsHandler
=== RUN   TestGetPluginDetailsHandler/Valid_plugin_name
=== RUN   TestGetPluginDetailsHandler/Empty_plugin_name
--- PASS: TestGetPluginDetailsHandler (0.00s)
    --- PASS: TestGetPluginDetailsHandler/Valid_plugin_name (0.00s)
    --- PASS: TestGetPluginDetailsHandler/Empty_plugin_name (0.00s)
=== RUN   TestInstallPluginHandler
=== RUN   TestInstallPluginHandler/Valid_plugin_installation
{"level":"info","ts":1750593129.6462538,"caller":"log/log.go:8","msg":"Plugin installation requested","name":"test-plugin","version":"v1.0.0","source":"https://github.com/test/plugin"}
=== RUN   TestInstallPluginHandler/Missing_plugin_name
=== RUN   TestInstallPluginHandler/Missing_plugin_source
=== RUN   TestInstallPluginHandler/Invalid_request_body
--- PASS: TestInstallPluginHandler (0.00s)
    --- PASS: TestInstallPluginHandler/Valid_plugin_installation (0.00s)
    --- PASS: TestInstallPluginHandler/Missing_plugin_name (0.00s)
    --- PASS: TestInstallPluginHandler/Missing_plugin_source (0.00s)
    --- PASS: TestInstallPluginHandler/Invalid_request_body (0.00s)
=== RUN   TestUninstallPluginHandler
=== RUN   TestUninstallPluginHandler/Valid_plugin_uninstallation
=== RUN   TestUninstallPluginHandler/Empty_plugin_name
--- PASS: TestUninstallPluginHandler (0.00s)
    --- PASS: TestUninstallPluginHandler/Valid_plugin_uninstallation (0.00s)
    --- PASS: TestUninstallPluginHandler/Empty_plugin_name (0.00s)
=== RUN   TestEnablePluginHandler
=== RUN   TestEnablePluginHandler/Valid_plugin_enable
=== RUN   TestEnablePluginHandler/Empty_plugin_name
--- PASS: TestEnablePluginHandler (0.00s)
    --- PASS: TestEnablePluginHandler/Valid_plugin_enable (0.00s)
    --- PASS: TestEnablePluginHandler/Empty_plugin_name (0.00s)
=== RUN   TestDisablePluginHandler
=== RUN   TestDisablePluginHandler/Valid_plugin_disable
=== RUN   TestDisablePluginHandler/Empty_plugin_name
--- PASS: TestDisablePluginHandler (0.00s)
    --- PASS: TestDisablePluginHandler/Valid_plugin_disable (0.00s)
    --- PASS: TestDisablePluginHandler/Empty_plugin_name (0.00s)
=== RUN   TestGetPluginStatusHandler
=== RUN   TestGetPluginStatusHandler/Valid_plugin_status_check
=== RUN   TestGetPluginStatusHandler/Empty_plugin_name
--- PASS: TestGetPluginStatusHandler (0.00s)
    --- PASS: TestGetPluginStatusHandler/Valid_plugin_status_check (0.00s)
    --- PASS: TestGetPluginStatusHandler/Empty_plugin_name (0.00s)
=== RUN   TestReloadPluginHandler
=== RUN   TestReloadPluginHandler/Valid_plugin_reload
=== RUN   TestReloadPluginHandler/Empty_plugin_name
--- PASS: TestReloadPluginHandler (0.00s)
    --- PASS: TestReloadPluginHandler/Valid_plugin_reload (0.00s)
    --- PASS: TestReloadPluginHandler/Empty_plugin_name (0.00s)
=== RUN   TestGetPluginSystemMetricsHandler
=== RUN   TestGetPluginSystemMetricsHandler/Get_plugin_system_metrics
--- PASS: TestGetPluginSystemMetricsHandler (0.00s)
    --- PASS: TestGetPluginSystemMetricsHandler/Get_plugin_system_metrics (0.00s)
=== RUN   TestGetPluginSystemConfigHandler
=== RUN   TestGetPluginSystemConfigHandler/Get_plugin_system_config
--- PASS: TestGetPluginSystemConfigHandler (0.00s)
    --- PASS: TestGetPluginSystemConfigHandler/Get_plugin_system_config (0.00s)
=== RUN   TestUpdatePluginSystemConfigHandler
=== RUN   TestUpdatePluginSystemConfigHandler/Valid_config_update
{"level":"info","ts":1750593129.6474054,"caller":"log/log.go:8","msg":"Plugin system configuration update requested","pluginsDirectory":"/custom/plugins","autoloadPlugins":true,"pluginTimeout":60}
=== RUN   TestUpdatePluginSystemConfigHandler/Invalid_request_body
--- PASS: TestUpdatePluginSystemConfigHandler (0.00s)
    --- PASS: TestUpdatePluginSystemConfigHandler/Valid_config_update (0.00s)
    --- PASS: TestUpdatePluginSystemConfigHandler/Invalid_request_body (0.00s)
=== RUN   TestSubmitPluginFeedbackHandler
=== RUN   TestSubmitPluginFeedbackHandler/Valid_feedback_submission
=== RUN   TestSubmitPluginFeedbackHandler/Invalid_request_body
--- PASS: TestSubmitPluginFeedbackHandler (0.00s)
    --- PASS: TestSubmitPluginFeedbackHandler/Valid_feedback_submission (0.00s)
    --- PASS: TestSubmitPluginFeedbackHandler/Invalid_request_body (0.00s)
=== RUN   TestCheckKubeStellarStatusHandler
=== RUN   TestCheckKubeStellarStatusHandler/Check_KubeStellar_Status
--- PASS: TestCheckKubeStellarStatusHandler (0.10s)
    --- PASS: TestCheckKubeStellarStatusHandler/Check_KubeStellar_Status (0.10s)
PASS
ok  	github.com/kubestellar/ui/test/api	(cached)
